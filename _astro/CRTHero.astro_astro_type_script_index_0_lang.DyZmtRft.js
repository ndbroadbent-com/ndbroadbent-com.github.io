let $=[],y=-1,u="/home/nathan";const g={"/":["home","bin","etc","usr"],"/home":["nathan"],"/home/nathan":["projects","documents","resume.txt"],"/home/nathan/projects":["docspring","scm_breeze","dotfiles"],"/home/nathan/documents":["notes.txt","ideas.md"],"C:\\":["Users","Windows","Program Files"],"C:\\Users":["Nathan"],"C:\\Users\\Nathan":["Projects","Documents","Desktop"],"C:\\Users\\Nathan\\Projects":["DocSpring","SCMBreeze"]},v={docspring:"https://docspring.com",scm_breeze:"https://github.com/scmbreeze/scm_breeze",dotfiles:"https://github.com/ndbroadbent/dotfiles"};function E(e){const o=e.trim().split(/\s+/),l=o[0].toLowerCase(),s=o.slice(1);switch(l){case"ls":case"ll":case"dir":return x(s[0]);case"pwd":case"cd.":return u;case"..":return w("..");case"cd":return w(s[0]);case"help":case"?":return`Available commands:
  ls, ll, dir - List directory contents
  pwd, cd.    - Print working directory
  cd [path]   - Change directory
  cat [file]  - Display file contents
  clear, cls  - Clear screen
  help, ?     - Show this help
  about       - About me
  contact     - Contact information
  github      - Open GitHub profile`;case"clear":case"cls":return L(),"";case"cat":case"type":return S(s[0]);case"about":return`Nathan Broadbent - Full-stack developer
Location: Paihia, New Zealand
Founder of DocSpring (https://docspring.com)
Blog: https://madebynathan.com`;case"contact":return`Email: hello@ndbroadbent.com
GitHub: github.com/ndbroadbent
LinkedIn: linkedin.com/in/ndbroadbent`;case"github":case"gh":return window.open("https://github.com/ndbroadbent","_blank"),"Opening GitHub profile...";case"blog":return window.open("https://madebynathan.com","_blank"),"Opening blog...";case"ps":return`PID  TTY          TIME CMD
  1  pts/0    00:00:00 init
  42 pts/0    00:00:00 portfolio.sh
1337 pts/0    00:00:00 terminal`;case"echo":return s.join(" ");case"":return"";default:return`Command not found: ${l}. Type 'help' for available commands.`}}function x(e){let o=u;if(e){const s=e.replace(/\/+$/,""),p=s.split("/"),t=p[p.length-1];if(v[t])return v[t];s.startsWith("/")?o=s:o=u==="/"?`/${s}`:`${u}/${s}`}const l=g[o]||[];return l.length===0?"Directory is empty":l.join("  ")}function w(e){if(!e||e==="~")return u="/home/nathan","";const o=e;if(e=e.replace(/\/+$/,""),o==="/"||e==="")return u="/","";if(e==="~")return u="/home/nathan","";if(e===".."){const n=u.split("/").filter(f=>f);return n.pop(),u=n.length>0?"/"+n.join("/"):"/",""}const l=["bin","etc","usr","/bin","/etc","/usr"],s=u==="/"?`/${e}`:`${u}/${e}`;if(l.includes(e)||l.includes(s))return"Permission denied";if(g[e])return u=e,"";if(g[s])return u=s,"";const p=e.split("/"),t=p[p.length-1];if(v[t]){const n=u==="/home/nathan/projects",f=p.includes("projects")||e.startsWith("projects/");if(n||f)return window.open(v[t],"_blank"),`Opening ${t}...`}let r=e,i=u;if(e.includes("/")){const n=e.split("/"),f=n[n.length-1],h=n.slice(0,-1).join("/");e.startsWith("/")?i="/"+h:i=u==="/"?`/${h}`:`${u}/${h}`,r=f}return(g[i]||[]).includes(r)?`Not a directory: ${e}`:`Directory not found: ${e}`}function S(e){if(!e)return"Usage: cat [filename]";const o={"resume.txt":`NATHAN BROADBENT - SOFTWARE DEVELOPER
==========================================
Full-stack developer with expertise in Ruby/Rails,
JavaScript/TypeScript, React, Go, and Rust.
Founder of DocSpring - PDF Generation API.
Email: hello@ndbroadbent.com`,"notes.txt":"toggle the theme to see some more stuff","ideas.md":`# Project Ideas
- Build a retro terminal website ✓
- Add more features to DocSpring`,"documents/notes.txt":"toggle the theme to see some more stuff","documents/ideas.md":`# Project Ideas
- Build a retro terminal website ✓
- Add more features to DocSpring`};if(o[e])return o[e];const l=e.split("/").pop()||"",s=o[l];return s||`File not found: ${e}`}function L(){const e=document.querySelector(".terminal-output");e&&(e.innerHTML='<p>> Terminal ready. Type "help" for commands.</p>')}function P(e,o){const l=document.querySelector(".terminal-output");if(!l)return;const s=document.createElement("p");if(s.textContent=`> ${e}`,s.style.color="#99ff99",s.style.margin="0.5rem 0",l.appendChild(s),o){const t=document.createElement("p");t.textContent=o,t.style.whiteSpace="pre-wrap",t.style.marginLeft="1rem",t.style.margin="0.3rem 0 0.3rem 1rem",l.appendChild(t)}const p=document.getElementById("crt-screen");p&&(p.scrollTop=p.scrollHeight)}function D(){const e=document.getElementById("command-input");if(!e)return;function o(){const t=document.getElementById("cursor");if(!t)return;const r=e.value;let i=0;if(r.length>0){const c=document.createElement("span");c.style.font=getComputedStyle(e).font,c.style.letterSpacing=getComputedStyle(e).letterSpacing,c.style.visibility="hidden",c.style.position="absolute",c.textContent=r,document.body.appendChild(c),i=c.offsetWidth,document.body.removeChild(c)}t.style.left=`calc(0.5ch + ${i}px)`,t.style.display="inline"}const l=document.getElementById("crt-screen");l&&l.addEventListener("click",()=>{e.focus()}),document.addEventListener("keydown",t=>{t.metaKey||t.ctrlKey||t.altKey||(t.key==="Enter"||t.key.length===1)&&(e.focus(),l&&(l.scrollTop=l.scrollHeight))});function s(){const t=e.value,r=t.split(/\s+/);if(r.length===1){const c=["ls","ll","dir","pwd","cd","help","clear","cls","cat","type","about","contact","github","blog","ps"].filter(n=>n.startsWith(r[0].toLowerCase()));if(c.length===1)e.value=c[0]+" ",o();else if(c.length>1){const n=p(c);if(n.length>r[0].length)e.value=n,o();else{const f=c.join("  ");P(t,f)}}}else if(r.length>=2){const i=r[0].toLowerCase(),c=r.slice(1).join(" ");if(i==="cd"||i==="ls"||i==="ll"||i==="dir"){let n=u,f=c,h="";if(c.includes("/")){const a=c.split("/"),d=a.slice(0,-1).join("/");f=a[a.length-1],h=d+"/",c.startsWith("/")?(n="/"+a.slice(1,-1).join("/"),n==="/"&&(n="/"),h=d===""?"/":d+"/"):n=u==="/"?`/${d}`:`${u}/${d}`}const m=(g[n]||[]).filter(a=>a.toLowerCase().startsWith(f.toLowerCase()));if(m.length===1){const a=n==="/"?`/${m[0]}`:`${n}/${m[0]}`,d=g[a]!==void 0;e.value=`${i} ${h}${m[0]}${d?"/":""}`,o()}else if(m.length>1){const a=p(m);if(a.length>f.length)e.value=`${i} ${h}${a}`,o();else{const d=m.map(b=>{const j=n==="/"?`/${b}`:`${n}/${b}`;return g[j]!==void 0?b+"/":b}).join("  ");P(t,d)}}}else if(i==="cat"||i==="type"){let n=u,f=c,h="";if(c.includes("/")){const a=c.split("/"),d=a.slice(0,-1).join("/");f=a[a.length-1],h=d+"/",c.startsWith("/")?(n="/"+a.slice(1,-1).join("/"),n==="/"&&(n="/"),h=d===""?"/":d+"/"):n=u==="/"?`/${d}`:`${u}/${d}`}const m=(g[n]||[]).filter(a=>a.toLowerCase().startsWith(f.toLowerCase()));if(m.length===1){const a=h?`${h}${m[0]}`:m[0],d=n==="/"?`/${m[0]}`:`${n}/${m[0]}`,b=g[d]!==void 0;e.value=`${i} ${a}${b?"/":""}`,o()}else if(m.length>1){const a=p(m);if(a.length>f.length)e.value=`${i} ${h}${a}`,o();else{const d=m.join("  ");P(t,d)}}}}}function p(t){if(t.length===0)return"";if(t.length===1)return t[0];let r=t[0];for(let i=1;i<t.length;i++)for(;t[i].indexOf(r)!==0;)if(r=r.substring(0,r.length-1),r==="")return"";return r}e.addEventListener("keydown",t=>{if(t.key==="Tab")t.preventDefault(),s();else if(t.key==="Enter"){t.preventDefault();const r=e.value.trim();if(r){$.push(r),y=$.length;const i=E(r);P(r,i)}else P("","");e.value="",o()}else t.key==="ArrowUp"?(t.preventDefault(),y>0&&(y--,e.value=$[y],o())):t.key==="ArrowDown"&&(t.preventDefault(),y<$.length-1?(y++,e.value=$[y]):(y=$.length,e.value=""),o())}),e.addEventListener("input",o),o()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",D):D();
